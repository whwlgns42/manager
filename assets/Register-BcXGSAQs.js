import{r as f,j as e,aY as i,S as l,aU as u,I as E,aZ as W,U as q,E as D,T as C,a$ as O,B as $,b0 as T,a6 as k,l as L,w as M}from"./index-C94LjWxh.js";import{F as N,c as v,E as A,a as I,r as G,d as U,b as x,e as V,A as Z}from"./EyeInvisibleOutlined-L3cWucJ5.js";import{I as p,a as d}from"./InputLabel-Cnbk1tJc.js";import{A as H}from"./Alert-ap9Sp5d-.js";const J=s=>new RegExp(/[0-9]/).test(s),Y=s=>new RegExp(/[a-z]/).test(s)&&new RegExp(/[A-Z]/).test(s),_=s=>new RegExp(/[!#@$%^&*)(+=._-]/).test(s),K=s=>s<2?{label:"Poor",color:"error.main"}:s<3?{label:"Weak",color:"warning.main"}:s<4?{label:"Normal",color:"warning.dark"}:s<5?{label:"Good",color:"success.main"}:s<6?{label:"Strong",color:"success.dark"}:{label:"Poor",color:"error.main"},Q=s=>{let o=0;return s.length>5&&(o+=1),s.length>7&&(o+=1),J(s)&&(o+=1),_(s)&&(o+=1),Y(s)&&(o+=1),o};function R({onRegisterSuccess:s,setError:o,isLoading:w,setIsLoading:j}){const[m,y]=f.useState(),[h,P]=f.useState(!1),z=()=>{P(!h)},S=n=>{n.preventDefault()},F=n=>{const t=Q(n);y(K(t))};return f.useEffect(()=>{F("")},[]),e.jsx(e.Fragment,{children:e.jsx(N,{initialValues:{name:"홍길동",nickname:"홍",gender:"남성",age:"2000-01-01",location:"서울",email:"example@example.com",password:"password123",passwordConfirm:"password123",terms:!0,submit:null},validationSchema:v().shape({name:x().max(50,"이름은 최대 50자까지 가능합니다").required("이름을 입력해주세요"),nickname:x().max(50,"닉네임은 최대 50자까지 가능합니다").required("닉네임을 입력해주세요"),gender:x().required("성별을 선택해주세요"),age:x().required("생년월일을 입력해주세요"),location:x().required("사는 지역을 입력해주세요"),email:x().email("유효하지 않은 이메일입니다").max(255).required("이메일을 입력해주세요"),password:x().max(255).required("비밀번호를 입력해주세요").min(8,"비밀번호는 최소 8자 이상이어야 합니다"),passwordConfirm:x().required("비밀번호 확인을 입력해주세요").oneOf([V("password"),null],"비밀번호가 일치하지 않습니다"),terms:U().oneOf([!0],"약관에 동의해야 합니다.")}),onSubmit:async(n,{setErrors:t,setStatus:a,setSubmitting:b})=>{console.log(n),JSON.stringify(n);try{j(!0),a({success:!1});const g=await G({name:n.name,nickname:n.nickname,gender:n.gender,age:n.age,location:n.location,email:n.email,password:n.password});g&&(a({success:!0}),s&&s(g.user)),b(!1),j(!1)}catch(g){console.error(g),a({success:!1}),t({submit:g.message||"회원가입에 실패했습니다. 다시 시도해주세요."}),o&&o(g.message||"회원가입에 실패했습니다. 다시 시도해주세요."),b(!1),j(!1)}},children:({errors:n,handleBlur:t,handleChange:a,handleSubmit:b,isSubmitting:g,touched:r,values:c})=>e.jsx("form",{noValidate:!0,onSubmit:b,children:e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{size:12,children:e.jsxs(l,{spacing:1,children:[e.jsx(p,{htmlFor:"name-signup",children:"이름"}),e.jsx(u,{id:"name-signup",type:"text",value:c.name,name:"name",onBlur:t,onChange:a,placeholder:"홍길동",fullWidth:!0,error:!!(r.name&&n.name)}),r.name&&n.name&&e.jsx(d,{error:!0,id:"helper-text-name-signup",children:n.name})]})}),e.jsx(i,{size:12,children:e.jsxs(l,{spacing:1,children:[e.jsx(p,{htmlFor:"nickname-signup",children:"닉네임"}),e.jsx(u,{id:"nickname-signup",type:"text",value:c.nickname,name:"nickname",onBlur:t,onChange:a,placeholder:"별명",fullWidth:!0,error:!!(r.nickname&&n.nickname)}),r.nickname&&n.nickname&&e.jsx(d,{error:!0,id:"helper-text-nickname-signup",children:n.nickname})]})}),e.jsx(i,{size:12,children:e.jsxs(l,{spacing:1,children:[e.jsx(p,{htmlFor:"gender-signup",children:"성별"}),e.jsxs(l,{direction:"row",spacing:2,children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"gender",value:"남성",checked:c.gender==="남성",onChange:a}),"남성"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"gender",value:"여성",checked:c.gender==="여성",onChange:a}),"여성"]})]}),r.gender&&n.gender&&e.jsx(d,{error:!0,id:"helper-text-gender-signup",children:n.gender})]})}),e.jsx(i,{size:12,children:e.jsxs(l,{spacing:1,children:[e.jsx(p,{htmlFor:"age-signup",children:"생년월일"}),e.jsx(u,{id:"age-signup",type:"date",value:c.age,name:"age",onBlur:t,onChange:a,fullWidth:!0,error:!!(r.age&&n.age)}),r.age&&n.age&&e.jsx(d,{error:!0,id:"helper-text-age-signup",children:n.age})]})}),e.jsx(i,{size:12,children:e.jsxs(l,{spacing:1,children:[e.jsx(p,{htmlFor:"location-signup",children:"사는 지역"}),e.jsx(u,{id:"location-signup",type:"text",value:c.location,name:"location",onBlur:t,onChange:a,placeholder:"거주 지역",fullWidth:!0,error:!!(r.location&&n.location)}),r.location&&n.location&&e.jsx(d,{error:!0,id:"helper-text-location-signup",children:n.location})]})}),e.jsx(i,{size:12,children:e.jsxs(l,{spacing:1,children:[e.jsx(p,{htmlFor:"email-signup",children:"이메일 주소"}),e.jsx(u,{id:"email-signup",type:"email",value:c.email,name:"email",onBlur:t,onChange:a,placeholder:"example@example.com",fullWidth:!0,error:!!(r.email&&n.email)}),r.email&&n.email&&e.jsx(d,{error:!0,id:"helper-text-email-signup",children:n.email})]})}),e.jsxs(i,{size:12,children:[e.jsxs(l,{spacing:1,children:[e.jsx(p,{htmlFor:"password-signup",children:"비밀번호"}),e.jsx(u,{fullWidth:!0,error:!!(r.password&&n.password),id:"password-signup",type:h?"text":"password",value:c.password,name:"password",onBlur:t,onChange:B=>{a(B),F(B.target.value)},placeholder:"********",endAdornment:e.jsx(E,{position:"end",children:e.jsx(W,{"aria-label":"비밀번호 보기 토글",onClick:z,onMouseDown:S,edge:"end",color:"secondary",children:h?e.jsx(A,{}):e.jsx(I,{})})})}),r.password&&n.password&&e.jsx(d,{error:!0,id:"helper-text-password-signup",children:n.password})]}),e.jsx(q,{fullWidth:!0,sx:{mt:2},children:e.jsxs(i,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(i,{children:e.jsx(D,{sx:{bgcolor:m==null?void 0:m.color,width:85,height:8,borderRadius:"7px"}})}),e.jsx(i,{children:e.jsx(C,{variant:"subtitle1",fontSize:"0.75rem",children:m==null?void 0:m.label})})]})})]}),e.jsx(i,{size:12,children:e.jsxs(l,{spacing:1,children:[e.jsx(p,{htmlFor:"passwordConfirm-signup",children:"비밀번호 확인"}),e.jsx(u,{fullWidth:!0,error:!!(r.passwordConfirm&&n.passwordConfirm),id:"passwordConfirm-signup",type:h?"text":"password",value:c.passwordConfirm,name:"passwordConfirm",onBlur:t,onChange:a,placeholder:"********",endAdornment:e.jsx(E,{position:"end",children:e.jsx(W,{"aria-label":"비밀번호 보기 토글",onClick:z,onMouseDown:S,edge:"end",color:"secondary",children:h?e.jsx(A,{}):e.jsx(I,{})})})}),r.passwordConfirm&&n.passwordConfirm&&e.jsx(d,{error:!0,id:"helper-text-passwordConfirm-signup",children:n.passwordConfirm})]})}),n.submit&&e.jsx(i,{size:12,children:e.jsx(d,{error:!0,children:n.submit})}),e.jsx(i,{size:12,children:e.jsxs(l,{spacing:1,children:[e.jsxs(p,{htmlFor:"terms-signup",children:[e.jsx("input",{type:"checkbox",name:"terms",checked:c.terms,onChange:a}),"약관 동의"]}),r.terms&&n.terms&&e.jsx(d,{error:!0,id:"helper-text-terms-signup",children:n.terms})]})}),e.jsx(i,{size:12,children:e.jsx(O,{children:e.jsx($,{disableElevation:!0,disabled:w,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:w?e.jsx(T,{size:24,color:"inherit"}):"회원가입"})})})]})})})})}R.propTypes={onRegisterSuccess:k.func,setError:k.func,isLoading:k.bool,setIsLoading:k.func};function ie(){const[s,o]=f.useState(""),[w,j]=f.useState(!1),m=L(),y=h=>{m("/login")};return e.jsx(Z,{children:e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{size:12,children:e.jsxs(l,{direction:"row",sx:{alignItems:"baseline",justifyContent:"space-between",mb:{xs:-.5,sm:.5}},children:[e.jsx(C,{variant:"h3",children:"회원가입"}),e.jsx(C,{component:M,to:"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"이미 계정이 있으신가요?"})]})}),s&&e.jsx(i,{size:12,children:e.jsx(H,{severity:"error",onClose:()=>o(""),children:s})}),e.jsx(i,{size:12,children:e.jsx(R,{onRegisterSuccess:y,setError:o,isLoading:w,setIsLoading:j})})]})})}export{ie as default};
