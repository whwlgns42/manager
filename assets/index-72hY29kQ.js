import{c as X,j as e,r as l,T as a,C as v,i as f,S as o,E as I,M as $,I as je,U,B as D,A as pe,z as q,x as ye}from"./index-C94LjWxh.js";import{L as ge,A as be,D as J}from"./DatePicker-CzX-_7de.js";import{G as r}from"./Grid-CadWwKob.js";import{T as z,S as K}from"./TextField-Cgvji-af.js";import{S as ve,T as fe}from"./TablePagination-Bm-w6Wrp.js";import{I as Q}from"./InputLabel-Cnbk1tJc.js";import{M as h}from"./MenuItem-COOgUMYe.js";import{T as Ie,a as De,c as S,d as n,b as Se}from"./TableRow-D9gLSdBk.js";import{T as Ce}from"./TableHead-z8A-iQpx.js";import{V as Ae}from"./Visibility-JReTSVyn.js";import{D as Pe,a as we,b as ze}from"./DialogContent-CtT_Tsm6.js";import{D as Me}from"./DialogTitle-B1KuyPDx.js";import{S as Le}from"./Snackbar-C8MTT-3n.js";import{A as Be}from"./Alert-ap9Sp5d-.js";const M=X(e.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"GetApp"),C=X(e.jsx("path",{d:"M18 17H6v-2h12zm0-4H6v-2h12zm0-4H6V7h12zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2z"}),"Receipt"),qe=()=>{const[Z,L]=l.useState(!1),[B,_]=l.useState([]),[A,ee]=l.useState([]),[x,k]=l.useState(""),[u,N]=l.useState("all"),[j,T]=l.useState("all"),[p,R]=l.useState(null),[y,H]=l.useState(null),[P,F]=l.useState(0),[g,te]=l.useState(10),[ae,Y]=l.useState(!1),[i,E]=l.useState(null),[b,w]=l.useState({open:!1,message:"",severity:"success"}),se=[{id:1,name:"홍길동"},{id:2,name:"김영희"},{id:3,name:"이철수"},{id:4,name:"박지영"},{id:5,name:"최민준"}],re=[{id:1,memberId:1,memberName:"홍길동",amount:5e4,paymentDate:"2023-11-03",dueDate:"2023-11-05",status:"paid",paymentMethod:"계좌이체",category:"월 회비",memo:"",paymentId:"PAY-2023110301",approvedBy:"관리자",createdAt:"2023-11-03 14:21:33"},{id:2,memberId:2,memberName:"김영희",amount:5e4,paymentDate:"2023-11-02",dueDate:"2023-11-05",status:"paid",paymentMethod:"카드",category:"월 회비",memo:"",paymentId:"PAY-2023110202",approvedBy:"시스템",createdAt:"2023-11-02 09:32:17"},{id:3,memberId:3,memberName:"이철수",amount:5e4,paymentDate:null,dueDate:"2023-11-05",status:"unpaid",paymentMethod:null,category:"월 회비",memo:"연락 필요",paymentId:null,approvedBy:null,createdAt:"2023-11-01 00:00:00"},{id:4,memberId:1,memberName:"홍길동",amount:5e4,paymentDate:"2023-10-04",dueDate:"2023-10-05",status:"paid",paymentMethod:"계좌이체",category:"월 회비",memo:"",paymentId:"PAY-2023100401",approvedBy:"관리자",createdAt:"2023-10-04 10:45:32"},{id:5,memberId:2,memberName:"김영희",amount:5e4,paymentDate:"2023-10-03",dueDate:"2023-10-05",status:"paid",paymentMethod:"카드",category:"월 회비",memo:"",paymentId:"PAY-2023100302",approvedBy:"시스템",createdAt:"2023-10-03 12:15:47"},{id:6,memberId:3,memberName:"이철수",amount:5e4,paymentDate:"2023-10-07",dueDate:"2023-10-05",status:"late",paymentMethod:"현금",category:"월 회비",memo:"지각 납부",paymentId:"PAY-2023100703",approvedBy:"관리자",createdAt:"2023-10-07 17:23:11"},{id:7,memberId:4,memberName:"박지영",amount:5e4,paymentDate:"2023-10-05",dueDate:"2023-10-05",status:"paid",paymentMethod:"계좌이체",category:"월 회비",memo:"",paymentId:"PAY-2023100504",approvedBy:"관리자",createdAt:"2023-10-05 09:12:45"},{id:8,memberId:5,memberName:"최민준",amount:5e4,paymentDate:null,dueDate:"2023-10-05",status:"unpaid",paymentMethod:null,category:"월 회비",memo:"미납",paymentId:null,approvedBy:null,createdAt:"2023-10-01 00:00:00"},{id:9,memberId:1,memberName:"홍길동",amount:1e5,paymentDate:"2023-09-20",dueDate:"2023-09-25",status:"paid",paymentMethod:"계좌이체",category:"워크샵 비용",memo:"가을 워크샵 참가비",paymentId:"PAY-2023092001",approvedBy:"관리자",createdAt:"2023-09-20 11:35:42"},{id:10,memberId:2,memberName:"김영희",amount:1e5,paymentDate:"2023-09-21",dueDate:"2023-09-25",status:"paid",paymentMethod:"카드",category:"워크샵 비용",memo:"가을 워크샵 참가비",paymentId:"PAY-2023092102",approvedBy:"시스템",createdAt:"2023-09-21 14:26:19"},{id:11,memberId:4,memberName:"박지영",amount:1e5,paymentDate:"2023-09-22",dueDate:"2023-09-25",status:"paid",paymentMethod:"계좌이체",category:"워크샵 비용",memo:"가을 워크샵 참가비",paymentId:"PAY-2023092204",approvedBy:"관리자",createdAt:"2023-09-22 16:41:23"},{id:12,memberId:5,memberName:"최민준",amount:1e5,paymentDate:"2023-09-24",dueDate:"2023-09-25",status:"paid",paymentMethod:"현금",category:"워크샵 비용",memo:"가을 워크샵 참가비",paymentId:"PAY-2023092405",approvedBy:"관리자",createdAt:"2023-09-24 09:57:38"}],m={totalPayments:0,totalAmount:0,paidCount:0,unpaidCount:0,lateCount:0};l.useEffect(()=>{L(!0),setTimeout(()=>{_(re),L(!1)},800)},[]),l.useEffect(()=>{let t=[...B];if(x){const s=x.toLowerCase();t=t.filter(c=>c.memberName.toLowerCase().includes(s)||c.paymentId&&c.paymentId.toLowerCase().includes(s)||c.memo&&c.memo.toLowerCase().includes(s))}u!=="all"&&(t=t.filter(s=>s.memberId===parseInt(u,10))),j!=="all"&&(t=t.filter(s=>s.status===j)),p&&(t=t.filter(s=>new Date(s.paymentDate||s.dueDate)>=p)),y&&(t=t.filter(s=>new Date(s.paymentDate||s.dueDate)<=y)),ee(t);const d={totalPayments:t.length,totalAmount:t.reduce((s,c)=>s+c.amount,0),paidCount:t.filter(s=>s.status==="paid").length,unpaidCount:t.filter(s=>s.status==="unpaid").length,lateCount:t.filter(s=>s.status==="late").length};Object.assign(m,d)},[B,x,u,j,p,y]);const W=({status:t})=>{let d,s;switch(t){case"paid":d="success",s="납부완료";break;case"unpaid":d="error",s="미납";break;case"late":d="warning",s="지각납부";break;case"exempt":d="info",s="면제";break;default:d="default",s=t}return e.jsx(ye,{color:d,label:s,size:"small"})},ne=t=>{E(t),Y(!0)},V=()=>{Y(!1),E(null)},G=t=>{w({open:!0,message:`영수증 ${t}가 다운로드되었습니다.`,severity:"success"})},ie=t=>{k(t.target.value)},le=t=>{N(t.target.value)},de=t=>{T(t.target.value)},oe=t=>{R(t)},ce=t=>{H(t)},me=()=>{k(""),N("all"),T("all"),R(null),H(null)},he=(t,d)=>{F(d)},xe=t=>{te(parseInt(t.target.value,10)),F(0)},O=()=>{w({...b,open:!1})},ue=()=>{w({open:!0,message:"회비 납부 내역이 엑셀 파일로 다운로드되었습니다.",severity:"success"})};return e.jsx(ge,{dateAdapter:be,children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(a,{variant:"h5",children:"회비 납부 내역"})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsx(v,{children:e.jsx(f,{children:e.jsxs(o,{spacing:1,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"총 납부 건수"}),e.jsxs(o,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(a,{variant:"h5",children:[m.totalPayments,"건"]}),e.jsx(I,{sx:{width:40,height:40,borderRadius:"50%",bgcolor:"primary.lighter",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(C,{color:"primary",fontSize:"small"})})]})]})})})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsx(v,{children:e.jsx(f,{children:e.jsxs(o,{spacing:1,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"총 납부 금액"}),e.jsxs(o,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(a,{variant:"h5",children:[m.totalAmount.toLocaleString(),"원"]}),e.jsx(I,{sx:{width:40,height:40,borderRadius:"50%",bgcolor:"success.lighter",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(C,{color:"success",fontSize:"small"})})]})]})})})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsx(v,{children:e.jsx(f,{children:e.jsxs(o,{spacing:1,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"납부완료"}),e.jsxs(o,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(a,{variant:"h5",children:[m.paidCount,"건"]}),e.jsx(I,{sx:{width:40,height:40,borderRadius:"50%",bgcolor:"success.lighter",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(C,{color:"success",fontSize:"small"})})]})]})})})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsx(v,{children:e.jsx(f,{children:e.jsxs(o,{spacing:1,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"미납/지각"}),e.jsxs(o,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(a,{variant:"h5",children:[m.unpaidCount,"/",m.lateCount,"건"]}),e.jsx(I,{sx:{width:40,height:40,borderRadius:"50%",bgcolor:"error.lighter",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(C,{color:"error",fontSize:"small"})})]})]})})})}),e.jsx(r,{item:!0,xs:12,children:e.jsx($,{children:e.jsxs(r,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(z,{fullWidth:!0,size:"small",label:"검색",variant:"outlined",value:x,onChange:ie,placeholder:"회원명, 결제ID, 메모 검색",InputProps:{startAdornment:e.jsx(je,{position:"start",children:e.jsx(ve,{fontSize:"small"})})}})}),e.jsx(r,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(U,{fullWidth:!0,size:"small",children:[e.jsx(Q,{id:"member-filter-label",children:"회원"}),e.jsxs(K,{labelId:"member-filter-label",value:u,label:"회원",onChange:le,children:[e.jsx(h,{value:"all",children:"전체 회원"}),se.map(t=>e.jsx(h,{value:t.id,children:t.name},t.id))]})]})}),e.jsx(r,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(U,{fullWidth:!0,size:"small",children:[e.jsx(Q,{id:"status-filter-label",children:"납부 상태"}),e.jsxs(K,{labelId:"status-filter-label",value:j,label:"납부 상태",onChange:de,children:[e.jsx(h,{value:"all",children:"전체 상태"}),e.jsx(h,{value:"paid",children:"납부완료"}),e.jsx(h,{value:"unpaid",children:"미납"}),e.jsx(h,{value:"late",children:"지각납부"})]})]})}),e.jsx(r,{item:!0,xs:12,sm:6,md:2,children:e.jsx(J,{label:"시작일",value:p,onChange:oe,renderInput:t=>e.jsx(z,{...t,fullWidth:!0,size:"small"})})}),e.jsx(r,{item:!0,xs:12,sm:6,md:2,children:e.jsx(J,{label:"종료일",value:y,onChange:ce,renderInput:t=>e.jsx(z,{...t,fullWidth:!0,size:"small"})})}),e.jsx(r,{item:!0,xs:12,md:1,children:e.jsx(D,{fullWidth:!0,variant:"outlined",color:"secondary",onClick:me,children:"초기화"})})]})})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs($,{title:e.jsxs(o,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(a,{variant:"h6",children:"회비 납부 내역"}),e.jsx(D,{variant:"outlined",startIcon:e.jsx(M,{}),onClick:ue,children:"엑셀 다운로드"})]}),children:[e.jsx(Ie,{children:e.jsxs(De,{children:[e.jsx(Ce,{children:e.jsxs(S,{children:[e.jsx(n,{children:"결제 ID"}),e.jsx(n,{children:"회원"}),e.jsx(n,{children:"종류"}),e.jsx(n,{align:"right",children:"금액"}),e.jsx(n,{children:"납부 기한"}),e.jsx(n,{children:"납부일"}),e.jsx(n,{children:"납부 상태"}),e.jsx(n,{children:"납부 방법"}),e.jsx(n,{children:"관리"})]})}),e.jsx(Se,{children:Z?e.jsx(S,{children:e.jsx(n,{colSpan:9,align:"center",children:"데이터 로딩 중..."})}):A.length===0?e.jsx(S,{children:e.jsx(n,{colSpan:9,align:"center",children:"납부 내역이 없습니다."})}):A.slice(P*g,P*g+g).map(t=>e.jsxs(S,{children:[e.jsx(n,{children:t.paymentId||"-"}),e.jsx(n,{children:e.jsxs(o,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(pe,{alt:t.memberName,sx:{width:32,height:32,bgcolor:"primary.lighter",color:"primary.dark"},children:t.memberName.charAt(0)}),e.jsx(a,{variant:"subtitle2",children:t.memberName})]})}),e.jsx(n,{children:t.category}),e.jsxs(n,{align:"right",children:[t.amount.toLocaleString(),"원"]}),e.jsx(n,{children:t.dueDate}),e.jsx(n,{children:t.paymentDate||"-"}),e.jsx(n,{children:e.jsx(W,{status:t.status})}),e.jsx(n,{children:t.paymentMethod||"-"}),e.jsx(n,{children:e.jsxs(o,{direction:"row",spacing:1,children:[e.jsx(q,{size:"small",color:"primary",onClick:()=>ne(t),children:e.jsx(Ae,{fontSize:"small"})}),t.status==="paid"&&e.jsx(q,{size:"small",color:"primary",onClick:()=>G(t.paymentId),children:e.jsx(M,{fontSize:"small"})})]})})]},t.id))})]})}),e.jsx(fe,{rowsPerPageOptions:[5,10,25],component:"div",count:A.length,rowsPerPage:g,page:P,onPageChange:he,onRowsPerPageChange:xe,labelRowsPerPage:"페이지당 행 수:",labelDisplayedRows:({from:t,to:d,count:s})=>`${t}-${d} / 전체 ${s}`})]})}),e.jsxs(Pe,{open:ae,onClose:V,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Me,{children:"회비 납부 상세 내역"}),e.jsx(we,{children:i&&e.jsxs(r,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"기본 정보"})}),e.jsxs(r,{item:!0,xs:6,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"결제 ID"}),e.jsx(a,{variant:"body1",children:i.paymentId||"-"})]}),e.jsxs(r,{item:!0,xs:6,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"회원"}),e.jsx(a,{variant:"body1",children:i.memberName})]}),e.jsxs(r,{item:!0,xs:6,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"종류"}),e.jsx(a,{variant:"body1",children:i.category})]}),e.jsxs(r,{item:!0,xs:6,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"금액"}),e.jsxs(a,{variant:"body1",children:[i.amount.toLocaleString(),"원"]})]}),e.jsxs(r,{item:!0,xs:6,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"납부 기한"}),e.jsx(a,{variant:"body1",children:i.dueDate})]}),e.jsxs(r,{item:!0,xs:6,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"납부일"}),e.jsx(a,{variant:"body1",children:i.paymentDate||"-"})]}),e.jsxs(r,{item:!0,xs:6,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"납부 상태"}),e.jsx(W,{status:i.status})]}),e.jsxs(r,{item:!0,xs:6,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"납부 방법"}),e.jsx(a,{variant:"body1",children:i.paymentMethod||"-"})]}),e.jsx(r,{item:!0,xs:12,children:e.jsx(a,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2},children:"추가 정보"})}),e.jsxs(r,{item:!0,xs:6,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"승인자"}),e.jsx(a,{variant:"body1",children:i.approvedBy||"-"})]}),e.jsxs(r,{item:!0,xs:6,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"처리 시간"}),e.jsx(a,{variant:"body1",children:i.createdAt})]}),e.jsxs(r,{item:!0,xs:12,children:[e.jsx(a,{variant:"body2",color:"textSecondary",children:"메모"}),e.jsx(a,{variant:"body1",children:i.memo||"-"})]})]})}),e.jsxs(ze,{children:[i&&i.status==="paid"&&e.jsx(D,{onClick:()=>G(i.paymentId),startIcon:e.jsx(M,{}),children:"영수증 다운로드"}),e.jsx(D,{onClick:V,children:"닫기"})]})]}),e.jsx(Le,{open:b.open,autoHideDuration:3e3,onClose:O,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(Be,{onClose:O,severity:b.severity,sx:{width:"100%"},children:b.message})})]})})};export{qe as default};
