import{R as y,l as z,j as e,aY as r,S as p,aU as k,I as P,aZ as T,T as g,a_ as O,w as I,a$ as W,B as $,b0 as R,a6 as t,r as S,b1 as q}from"./index-C94LjWxh.js";import{F as M,c as N,E as V,a as G,l as H,b as v,A as J}from"./EyeInvisibleOutlined-L3cWucJ5.js";import{I as C,a as j}from"./InputLabel-Cnbk1tJc.js";import{F as U}from"./FormControlLabel-Dv_Ijfjm.js";import{C as Y}from"./Checkbox-COhjgRjZ.js";import{A as Z}from"./Alert-ap9Sp5d-.js";function L({isDemo:h=!1,onLoginSuccess:i,setError:l,isLoading:c,setIsLoading:o}){const[u,f]=y.useState(!1),[x,A]=y.useState(!1),B=z(),D=()=>{A(!x)},E=s=>{s.preventDefault()};return e.jsx(e.Fragment,{children:e.jsx(M,{initialValues:{email:"sample@example.com",password:"samplePassword",submit:null},validationSchema:N().shape({email:v().email("유효하지 않은 이메일입니다").max(255).required("이메일을 입력해주세요"),password:v().max(255).required("비밀번호를 입력해주세요")}),onSubmit:async(s,{setErrors:d,setStatus:n,setSubmitting:m})=>{const w=JSON.stringify(s);alert(w),B("/dashboard");try{o(!0),n({success:!1});const a=await H({email:s.email,password:s.password});a&&a.token&&(localStorage.setItem("token",a.token),n({success:!0}),i&&i(a.user)),m(!1),o(!1)}catch(a){console.error(a),n({success:!1}),d({submit:a.message||"로그인에 실패했습니다. 다시 시도해주세요."}),l&&l(a.message||"로그인에 실패했습니다. 다시 시도해주세요."),m(!1),o(!1)}},children:({errors:s,handleBlur:d,handleChange:n,handleSubmit:m,isSubmitting:w,touched:a,values:b})=>e.jsx("form",{noValidate:!0,onSubmit:m,children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{size:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(C,{htmlFor:"email-login",children:"이메일 주소"}),e.jsx(k,{id:"email-login",type:"email",value:b.email,name:"email",onBlur:d,onChange:n,placeholder:"이메일을 입력하세요",fullWidth:!0,error:!!(a.email&&s.email)}),a.email&&s.email&&e.jsx(j,{error:!0,id:"standard-weight-helper-text-email-login",children:s.email})]})}),e.jsx(r,{size:12,children:e.jsxs(p,{spacing:1,children:[e.jsx(C,{htmlFor:"password-login",children:"비밀번호"}),e.jsx(k,{fullWidth:!0,error:!!(a.password&&s.password),id:"password-login",type:x?"text":"password",value:b.password,name:"password",onBlur:d,onChange:n,placeholder:"비밀번호를 입력하세요",endAdornment:e.jsx(P,{position:"end",children:e.jsx(T,{"aria-label":"비밀번호 보기 토글",onClick:D,onMouseDown:E,edge:"end",color:"secondary",children:x?e.jsx(V,{}):e.jsx(G,{})})})}),a.password&&s.password&&e.jsx(j,{error:!0,id:"standard-weight-helper-text-password-login",children:s.password})]})}),e.jsx(r,{size:12,sx:{mt:-1},children:e.jsxs(p,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e.jsx(U,{control:e.jsx(Y,{checked:u,onChange:F=>f(F.target.checked),name:"checked",color:"primary",size:"small"}),label:e.jsx(g,{variant:"body2",children:"로그인 상태 유지"})}),e.jsx(O,{variant:"body2",component:I,to:"/forgot-password",color:"primary",sx:{textDecoration:"none"},children:"비밀번호를 잊으셨나요?"})]})}),s.submit&&e.jsx(r,{size:12,children:e.jsx(j,{error:!0,children:s.submit})}),e.jsx(r,{size:12,children:e.jsx(W,{children:e.jsx($,{disableElevation:!0,disabled:c,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:c?e.jsx(R,{size:24,color:"inherit"}):"로그인"})})})]})})})})}L.propTypes={isDemo:t.bool,onLoginSuccess:t.func,setError:t.func,isLoading:t.bool,setIsLoading:t.func};function ae(){const[h,i]=S.useState(""),[l,c]=S.useState(!1),o=z(),u=f=>{o("/dashboard")};return e.jsx(q,{children:e.jsx(J,{children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{size:12,children:e.jsxs(p,{direction:"row",sx:{alignItems:"baseline",justifyContent:"space-between",mb:{xs:-.5,sm:.5}},children:[e.jsx(g,{variant:"h3",children:"로그인"}),e.jsx(g,{component:I,to:"/register",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"계정이 없으신가요?"})]})}),h&&e.jsx(r,{size:12,children:e.jsx(Z,{severity:"error",onClose:()=>i(""),children:h})}),e.jsx(r,{size:12,children:e.jsx(L,{onLoginSuccess:u,setError:i,isLoading:l,setIsLoading:c})})]})})})}export{ae as default};
